(()=>{"use strict";var t={};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function s(t,s){for(var i=0;i<s.length;i++){var n=s[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,s){if("object"!==e(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===e(r)?r:String(r)),n)}var r}t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var s=t.g.document;if(!e&&s&&(s.currentScript&&(e=s.currentScript.src),!e)){var i=s.getElementsByTagName("script");if(i.length)for(var n=i.length-1;n>-1&&!e;)e=i[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.p,t.p,t.p;var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i;return e=t,i=[{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.options=e,this.element=document.createElement(t),this.addContent(),this.addAttributes(),this.element}},{key:"addContent",value:function(){this.element.textContent=this.options.content}},{key:"addAttributes",value:function(){var t=this.options.attributes;for(var e in t)this.element.setAttribute(e,t[e])}}],i&&s(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==n(t)||null===t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(r)?r:String(r)),i)}var r}var a=new i,o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e.name,this.min=e.range.min,this.max=e.range.max,this.step=e.step,this.type=e.type||"time",this.build()}var e,s;return e=t,s=[{key:"build",value:function(){var t=a.create("div",{attributes:{class:"slider"}}),e=a.create("input",{attributes:{type:"range",min:this.min,max:this.max,step:this.step,value:this.value}}),s=a.create("p",{content:"".concat(this.name," :")}),i=a.create("p"),n=a.create("div");n.append(s,i),t.append(n,e),this.block=t,this.slider=e,this.display=i,this.updateDisplay(this.value)}},{key:"updateDisplay",value:function(t){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this.value=t,this.slider.value=t);var e="time"==this.type?String(Math.trunc(this.value/60))+" mins":this.value;this.display.textContent=e}}],s&&r(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),t}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,n=function(t,e){if("object"!==c(t)||null===t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!==c(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===c(n)?n:String(n)),i)}var n}function h(t,e,s){return e&&u(t.prototype,e),s&&u(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}var d=new i,p=function(){function t(){l(this,t),this.frame=document.querySelector("#component"),this.buildDOM()}return h(t,[{key:"buildDOM",value:function(){this.container=d.create("div",{attributes:{id:"container",class:"font-sura"}}),this.shadow=this.frame.attachShadow({mode:"open"});var t=d.create("link",{attributes:{href:"style.mini.css",rel:"stylesheet"}});this.shadow.appendChild(t),this.shadow.appendChild(this.container),this.shadow.className="theme-blue",this.defaultTimes={focus:1500,short:300,long:1200,cycles:4},this.buildHeader(),this.buildMain(),this.buildSettings()}},{key:"buildHeader",value:function(){var t=d.create("header"),e=d.create("h1",{content:"Pomodoro"}),s=d.create("span",{content:" timer"});e.appendChild(s);var i=d.create("div",{attributes:{class:"settings"}});this.settingsBtn=d.create("button",{attributes:{class:"btn-settings",title:"Settings"}}),i.appendChild(this.settingsBtn),t.append(e,i),this.container.appendChild(t)}},{key:"buildMain",value:function(){this.main=d.create("main");var t=d.create("div",{attributes:{id:"timerBlock"}}),e=d.create("div",{attributes:{id:"timer"}}),s=d.create("div",{attributes:{class:"pie-left"}}),i=d.create("div",{attributes:{class:"pie hide"}});s.appendChild(i),this.pieL=i;var n=d.create("div",{attributes:{class:"pie-right"}}),r=d.create("div",{attributes:{class:"pie"}});n.appendChild(r),this.pieR=r;var a=d.create("p",{attributes:{id:"time"}});e.append(s,n,a),this.time=a,t.appendChild(e);var o=d.create("div",{attributes:{id:"div-timer-type"}});this.timerTypeDiv=o,this.focusBtn=d.create("button",{attributes:{class:"btn-timer-type active"},content:"focus"}),this.shortBtn=d.create("button",{attributes:{class:"btn-timer-type"},content:"short break"}),this.longBtn=d.create("button",{attributes:{class:"btn-timer-type"},content:"long break"}),o.append(this.shortBtn,this.focusBtn,this.longBtn);var c=d.create("div");this.startBtn=d.create("button",{attributes:{id:"btn-start"}}),c.appendChild(this.startBtn),this.main.append(t,o,c),this.container.appendChild(this.main)}},{key:"buildSettings",value:function(){this.settingsPanel=new f}},{key:"displaySettings",value:function(){this.container.appendChild(this.settingsPanel.panel)}},{key:"closeSettings",value:function(){this.container.removeChild(this.settingsPanel.panel)}}]),t}(),f=function(){function t(){l(this,t),this.build()}return h(t,[{key:"build",value:function(){this.panel=d.create("div",{attributes:{class:"settingsWindow"}});var t=d.create("div",{attributes:{class:"settings-header"}}),e=d.create("h2",{content:"Settings"});this.close=d.create("button",{attributes:{class:"settings-close-btn"}}),t.append(e,this.close),this.panel.appendChild(t);var s=d.create("h3",{content:"Font"});this.fontFamilyBlock=d.create("div",{attributes:{class:"font-family"}});var i=d.create("p",{content:"Family :"});this.font1=d.create("button",{content:"aA",attributes:{title:"Suravaram","data-font":"sura"}}),this.font2=d.create("button",{content:"aA",attributes:{title:"Prompt","data-font":"prompt"}}),this.font3=d.create("button",{content:"aA",attributes:{title:"Bruno Ace","data-font":"bruno"}}),this.fontFamilyBlock.append(i,this.font1,this.font2,this.font3),this.fontColorBlock=d.create("div",{attributes:{class:"font-colour"}});var n=d.create("p",{content:"Colour :"});this.colour1=d.create("button",{attributes:{title:"Blue"}}),this.colour1.appendChild(d.create("span")),this.colour2=d.create("button",{attributes:{title:"Red"}}),this.colour2.appendChild(d.create("span")),this.colour3=d.create("button",{attributes:{title:"Green"}}),this.colour3.appendChild(d.create("span")),this.fontColorBlock.append(n,this.colour1,this.colour2,this.colour3);var r=d.create("div");r.append(s,this.fontFamilyBlock,this.fontColorBlock),this.panel.appendChild(r);var a=d.create("h3",{content:"Durations"});this.focusSlider=new o({name:"Focus",range:{min:600,max:3600},step:60}),this.shortSlider=new o({name:"Short break",range:{min:60,max:600},step:60}),this.longSlider=new o({name:"Long break",range:{min:300,max:1800},step:60}),this.cyclesSlider=new o({name:"Cycles",type:"plain",range:{min:1,max:10},step:1});var c=d.create("div");c.append(a,this.focusSlider.block,this.shortSlider.block,this.longSlider.block,this.cyclesSlider.block),this.panel.appendChild(c);var l=d.create("label",{content:"Automatic cycling :",attributes:{class:"auto-cycle-label"}});this.autoCycle=d.create("input",{attributes:{type:"checkbox"}}),l.append(this.autoCycle,d.create("div")),c.appendChild(l)}}]),t}();function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function v(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,n=function(t,e){if("object"!==y(t)||null===t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!==y(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===y(n)?n:String(n)),i)}var n}var m=new p;new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctrls={settings:{open:m.settingsBtn,close:m.settingsPanel.close,font:{family:m.settingsPanel.fontFamilyBlock,color:m.settingsPanel.fontColorBlock},autocycle:m.settingsPanel.autoCycle,sliders:{focus:m.settingsPanel.focusSlider,short:m.settingsPanel.shortSlider,long:m.settingsPanel.longSlider,cycles:m.settingsPanel.cyclesSlider}},displayedType:0,types:{div:m.timerTypeDiv,focus:m.focusBtn,short:m.shortBtn,long:m.longBtn},start:m.startBtn},this.settings=JSON.parse(localStorage.getItem("settings"))||{font:"sura",color:"blue",durations:{focus:1500,short:300,long:1200,cycles:4},autocycle:!0},this.initTheme(),this.currentCycle={stage:0,i:1},this.setTime(),this.refreshTime(),this.initEvents(),this.initSliders()}var e,s;return e=t,s=[{key:"initTheme",value:function(){switch(m.container.className="theme-".concat(this.settings.color),m.main.className="font-".concat(this.settings.font),m.settingsPanel.font1.classList.remove("active"),m.settingsPanel.font2.classList.remove("active"),m.settingsPanel.font3.classList.remove("active"),this.settings.font){case"sura":m.settingsPanel.font1.classList.add("active");break;case"prompt":m.settingsPanel.font2.classList.add("active");break;case"bruno":m.settingsPanel.font3.classList.add("active")}switch(m.settingsPanel.colour1.classList.remove("active"),m.settingsPanel.colour2.classList.remove("active"),m.settingsPanel.colour3.classList.remove("active"),this.settings.color){case"blue":m.settingsPanel.colour1.classList.add("active");break;case"red":m.settingsPanel.colour2.classList.add("active");break;case"green":m.settingsPanel.colour3.classList.add("active")}}},{key:"initSliders",value:function(){this.ctrls.settings.sliders.long.updateDisplay(this.settings.durations.long),this.ctrls.settings.sliders.focus.updateDisplay(this.settings.durations.focus),this.ctrls.settings.sliders.short.updateDisplay(this.settings.durations.short),this.ctrls.settings.sliders.cycles.updateDisplay(this.settings.durations.cycles),this.ctrls.settings.autocycle.checked=this.settings.autocycle}},{key:"initEvents",value:function(){var t=this;window.addEventListener("beforeunload",(function(){var e=JSON.stringify(t.settings);localStorage.setItem("settings",e)})),this.ctrls.settings.open.addEventListener("click",(function(){m.displaySettings()})),this.ctrls.settings.close.addEventListener("click",(function(){m.closeSettings()})),this.ctrls.settings.font.family.addEventListener("click",(function(e){e.target.title&&(m.settingsPanel.font1.classList.remove("active"),m.settingsPanel.font2.classList.remove("active"),m.settingsPanel.font3.classList.remove("active"),e.target.classList.add("active"),t.settings.font=e.target.dataset.font,t.initTheme())})),this.ctrls.settings.font.color.addEventListener("click",(function(e){e.target.title&&(m.settingsPanel.colour1.classList.remove("active"),m.settingsPanel.colour2.classList.remove("active"),m.settingsPanel.colour3.classList.remove("active"),e.target.classList.add("active"),t.settings.color=String(e.target.title).toLowerCase(),t.initTheme())})),this.ctrls.settings.sliders.focus.slider.addEventListener("input",(function(e){t.ctrls.settings.sliders.focus.updateDisplay(e.target.value,!0),t.settings.durations.focus=e.target.value,0===t.ctrls.displayedType&&(t.setTime(0),t.refreshTime())})),this.ctrls.settings.sliders.short.slider.addEventListener("input",(function(e){t.ctrls.settings.sliders.short.updateDisplay(e.target.value,!0),t.settings.durations.short=e.target.value,1===t.ctrls.displayedType&&(t.setTime(1),t.refreshTime())})),this.ctrls.settings.sliders.long.slider.addEventListener("input",(function(e){t.ctrls.settings.sliders.long.updateDisplay(e.target.value,!0),t.settings.durations.long=e.target.value,2===t.ctrls.displayedType&&(t.setTime(2),t.refreshTime())})),this.ctrls.settings.sliders.cycles.slider.addEventListener("input",(function(e){t.ctrls.settings.sliders.cycles.updateDisplay(e.target.value,!0),t.settings.durations.cycles=e.target.value})),this.ctrls.settings.autocycle.addEventListener("click",(function(e){t.settings.autocycle=e.target.checked})),this.ctrls.start.addEventListener("click",(function(){t.timer?(console.log("Clicked pause."),t.pause()):(console.log("Clicked play."),t.play())})),this.ctrls.types.div.addEventListener("click",(function(e){if(e.target!==t.ctrls.types.div){switch(t.settings.autocycle=!1,t.ctrls.settings.autocycle.checked=!1,t.reset(),e.target){case t.ctrls.types.focus:t.currentCycle.stage=0,t.setDisplayType(0);break;case t.ctrls.types.short:t.currentCycle.stage=1,t.setDisplayType(1);break;case t.ctrls.types.long:t.currentCycle.stage=2,t.setDisplayType(2)}t.refreshTime()}}))}},{key:"setDisplayType",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentCycle.stage;switch(t){case 0:this.ctrls.types.focus.classList.add("active"),this.ctrls.types.short.classList.remove("active"),this.ctrls.types.long.classList.remove("active");break;case 1:this.ctrls.types.short.classList.add("active"),this.ctrls.types.focus.classList.remove("active"),this.ctrls.types.long.classList.remove("active");break;case 2:this.ctrls.types.long.classList.add("active"),this.ctrls.types.short.classList.remove("active"),this.ctrls.types.focus.classList.remove("active")}this.setTime(t),this.ctrls.displayedType=t}},{key:"setTime",value:function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0){case 0:this.timeLeft=this.settings.durations.focus;break;case 1:this.timeLeft=this.settings.durations.short;break;case 2:this.timeLeft=this.settings.durations.long}}},{key:"refreshTime",value:function(){var t=Math.trunc(this.timeLeft/60),e=this.timeLeft%60;m.time.textContent="".concat(t<10?"0"+t:t,":").concat(e<10?"0"+e:e)}},{key:"reset",value:function(){var t=this;if(clearInterval(this.timer),this.timer=!1,m.pieL.style="transform: rotate(0deg);",setTimeout((function(){m.pieL.classList.add("hide"),m.pieR.style="transform: rotate(0deg);"}),500),!this.settings.autocycle)return this.ctrls.start.classList.remove("pause"),this.currentCycle.stage=0,this.currentCycle.i=1,this.setDisplayType(),this.setTime(),void this.refreshTime();var e=!0;0==this.currentCycle.stage?this.currentCycle.i<4?this.currentCycle.stage=1:this.currentCycle.stage=2:(2==this.currentCycle.stage&&(e=!1,console.log("Full cycle complete.")),this.currentCycle.stage=0),this.currentCycle.i++,this.setTime(this.currentCycle.stage),this.setDisplayType(this.currentCycle.stage),this.refreshTime(),e&&setTimeout((function(){console.log("Play in logic."),t.play()}),1001)}},{key:"play",value:function(){var t=this;this.ctrls.start.classList.add("pause"),this.timer=setInterval((function(){t.timeLeft--,t.timeLeft<0?(t.alert(),t.reset()):(t.refreshTime(),t.doRotation())}),1e3)}},{key:"pause",value:function(){clearInterval(this.timer),this.timer=!1,this.ctrls.start.classList.remove("pause")}},{key:"doRotation",value:function(){var t=0==this.currentCycle.stage?this.settings.durations.focus:1==this.currentCycle.stage?this.settings.durations.short:this.settings.durations.long,e=360*(1-this.timeLeft/t),s=Math.trunc(e/180);s?(180==e&&(m.pieR.style="transform: rotate(180deg);",setTimeout((function(){m.pieL.classList.remove("hide")}),500)),m.pieL.style="transform: rotate(".concat(2==s?180:e%180,"deg);")):m.pieR.style="transform: rotate(".concat(e%180,"deg);")}},{key:"alert",value:function(){var t=new Audio("../assets/audio/alert.mp3");t.volume=.5,t.play()}}],s&&v(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),t}())})();